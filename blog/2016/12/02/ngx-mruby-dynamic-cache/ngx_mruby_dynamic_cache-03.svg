<?xml version="1.0" encoding="utf-8"?>
<svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" viewBox="149.5 148.55 991.9000000000001 439.13950000000017" xmlns:cacoo="http://cacoo.com/" preserveAspectRatio="xMidYMin meet" xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id0" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#67ab9f" offset="0%"/><stop stop-opacity="1.0" stop-color="#02735f" offset="100%"/></radialGradient><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id2" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#b5739d" offset="0%"/><stop stop-opacity="1.0" stop-color="#83165c" offset="100%"/></radialGradient><marker refX="0.0" refY="7.0" markerUnits="userSpaceOnUse" orient="auto" id="id4" markerHeight="14.0" viewBox="0 0 14.0 14.0" preserveAspectRatio="xMidYMid meet" markerWidth="14.0" overflow="visible"><path fill="#cccccc" d="M14.0 0 L0 7.0 L14.0 14.0z" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="round" stroke="#cccccc"/></marker><marker refX="0.0" refY="7.0" markerUnits="userSpaceOnUse" orient="auto" id="id5" markerHeight="14.0" viewBox="0 0 14.0 14.0" preserveAspectRatio="xMidYMid meet" markerWidth="14.0" overflow="visible"><path fill="#cccccc" d="M14.0 0 L0 7.0 L14.0 14.0z" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="round" stroke="#cccccc"/></marker><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id6" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#ffffff" offset="0%"/><stop stop-opacity="1.0" stop-color="#67ab9f" offset="100%"/></radialGradient><marker refX="0.0" refY="7.0" markerUnits="userSpaceOnUse" orient="auto" id="id10" markerHeight="14.0" viewBox="0 0 14.0 14.0" preserveAspectRatio="xMidYMid meet" markerWidth="14.0" overflow="visible"><path fill="#cccccc" d="M7.0 3.5 L0 7.0 L7.0 10.5z" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="round" stroke="#cccccc"/></marker><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id12" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#7ea6e0" offset="0%"/><stop stop-opacity="1.0" stop-color="#286bcc" offset="100%"/></radialGradient><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id13" cy="25%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#7ea6e0" offset="0%"/><stop stop-opacity="1.0" stop-color="#286bcc" offset="100%"/></radialGradient><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id15" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#ea6b66" offset="0%"/><stop stop-opacity="1.0" stop-color="#dc0800" offset="100%"/></radialGradient><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id17" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#ffffff" offset="0%"/><stop stop-opacity="1.0" stop-color="#a680b8" offset="100%"/></radialGradient><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id19" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#ffffff" offset="0%"/><stop stop-opacity="1.0" stop-color="#a680b8" offset="100%"/></radialGradient><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id22" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#97d077" offset="0%"/><stop stop-opacity="1.0" stop-color="#51b11d" offset="100%"/></radialGradient><marker refX="14.0" refY="7.0" markerUnits="userSpaceOnUse" orient="auto" id="id24" markerHeight="14.0" viewBox="0 0 14.0 14.0" preserveAspectRatio="xMidYMid meet" markerWidth="14.0" overflow="visible"><path fill="#000000" d="M7.0 3.5 L14.0 7.0 L7.0 10.5z" stroke-width="2.0" stroke-linejoin="round" stroke-linecap="round" stroke="#000000"/></marker><marker refX="0.0" refY="7.0" markerUnits="userSpaceOnUse" orient="auto" id="id25" markerHeight="14.0" viewBox="0 0 14.0 14.0" preserveAspectRatio="xMidYMid meet" markerWidth="14.0" overflow="visible"><path fill="#000000" d="M7.0 3.5 L0 7.0 L7.0 10.5z" stroke-width="2.0" stroke-linejoin="round" stroke-linecap="round" stroke="#000000"/></marker><marker refX="14.0" refY="7.0" markerUnits="userSpaceOnUse" orient="auto" id="id26" markerHeight="14.0" viewBox="0 0 14.0 14.0" preserveAspectRatio="xMidYMid meet" markerWidth="14.0" overflow="visible"><path fill="#000000" d="M7.0 3.5 L14.0 7.0 L7.0 10.5z" stroke-width="2.0" stroke-linejoin="round" stroke-linecap="round" stroke="#000000"/></marker><marker refX="0.0" refY="7.0" markerUnits="userSpaceOnUse" orient="auto" id="id28" markerHeight="14.0" viewBox="0 0 14.0 14.0" preserveAspectRatio="xMidYMid meet" markerWidth="14.0" overflow="visible"><path fill="#cccccc" d="M14.0 0 L0 7.0 L14.0 14.0z" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="round" stroke="#cccccc"/></marker><radialGradient xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" r="75%" xlink:actuate="onLoad" cx="50%" id="id29" cy="50%" xlink:show="other"><stop stop-opacity="1.0" stop-color="#ffffff" offset="0%"/><stop stop-opacity="1.0" stop-color="#a680b8" offset="100%"/></radialGradient></defs><g><g transform="translate(164.5 288.0)"><path fill="url(#id0)" d="M511.19999999999897 96.9999999999999 Q511.19999999999897 101.9999999999999 506.19999999999897 101.9999999999999 L5.0 101.9999999999999 Q0.0 101.9999999999999 0.0 96.9999999999999 L0.0 5.0 Q0.0 0.0 5.0 0.0 L506.19999999999897 0.0 Q511.19999999999897 0.0 511.19999999999897 5.0 L511.19999999999897 96.9999999999999 L511.19999999999897 96.9999999999999z" stroke-width="1.0" stroke-linejoin="round" stroke="#02735f"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id1"><path d="M0 0 L509.20000000000005 0 L509.20000000000005 100.0 L0 100.0z"/></clipPath></defs><text font-size="16" clip-path="url(#id1)" text-decoration="none" fill="#ffffff" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="235.45" xml:space="preserve" y="94.56670150756835" textLength="38.30000000000001">nginx</tspan></text></g></g><g transform="translate(167.39999999999998 465.33950000000004)"><path fill="url(#id2)" d="M511.1999999999999 102.35000000000016 Q511.1999999999999 107.35000000000016 506.1999999999999 107.35000000000016 L5.0 107.35000000000016 Q0.0 107.35000000000016 0.0 102.35000000000016 L0.0 5.0 Q0.0 0.0 5.0 0.0 L506.1999999999999 0.0 Q511.1999999999999 0.0 511.1999999999999 5.0 L511.1999999999999 102.35000000000016 L511.1999999999999 102.35000000000016z" stroke-width="1.0" stroke-linejoin="round" stroke="#83165c"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id3"><path d="M0 0 L509.20000000000005 0 L509.20000000000005 105.35000000000002 L0 105.35000000000002z"/></clipPath></defs><text font-size="16" clip-path="url(#id3)" text-decoration="none" fill="#ffffff" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="233.0" xml:space="preserve" y="99.91670150756838" textLength="43.200000000000045">Origin</tspan></text></g></g><path marker-start="url(#id4)" fill="none" d="M297.0 184.98682309462788 L297.048580808134 527.3000001007052 Q297.05 537.3 287.0500010397477 537.3045601483726 L237.99999896025227 537.3269276794144 Q227.99999999999997 537.3314878277871 227.9714558419906 527.331528566318 L227.0 186.99853149454634" stroke-width="3.0" stroke-linejoin="round" stroke="#cccccc"/><path marker-start="url(#id5)" fill="none" d="M463.5 182.0 L463.5 331.6230228634667 Q463.5 341.6230228634667 453.5000003496944 341.6203782675288 L403.4999996503056 341.6071552871919 Q393.5 341.604510691254 393.5 331.604510691254 L393.5 187.89337739245877" stroke-width="3.0" stroke-linejoin="round" stroke="#cccccc"/><g transform="translate(377.5 298.104510691254)"><path fill="url(#id6)" d="M108.99999999999991 30.0 L0.0 30.0 L0.0 0.0 L108.99999999999991 0.0 L108.99999999999991 30.0z" stroke-width="1.0" stroke-linejoin="round" stroke="#358f7f"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id7"><path d="M0 0 L107.0 0 L107.0 28.0 L0 28.0z"/></clipPath></defs><text font-size="12" clip-path="url(#id7)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="37.5" xml:space="preserve" y="18.25" textLength="32.0">cache</tspan></text></g></g><g transform="translate(188.25 163.55)"><defs><clipPath id="id8"><path d="M0 0 L168.5 0 L168.5 27.0 L0 27.0z"/></clipPath></defs><text font-size="12" clip-path="url(#id8)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="1.95" xml:space="preserve" y="12.792247772216797" textLength="131.95">GET pyama.jp/index.html</tspan></text></g><g transform="translate(356.75 163.55)"><defs><clipPath id="id9"><path d="M0 0 L164.0 0 L164.0 27.0 L0 27.0z"/></clipPath></defs><text font-size="12" clip-path="url(#id9)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="1.95" xml:space="preserve" y="12.792247772216797" textLength="131.95">GET pyama.jp/index.html</tspan></text></g><path marker-start="url(#id10)" fill="none" d="M371.0147027033899 315.9999995 L302.9852972966101 315.9999995" stroke-width="3.0" stroke-linejoin="round" stroke="#cccccc"/><g transform="translate(317.25 297.0)"><defs><clipPath id="id11"><path d="M0 0 L39.5 0 L39.5 19.0 L0 19.0z"/></clipPath></defs><text font-size="12" clip-path="url(#id11)" text-decoration="none" fill="#ffffff" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="1.95" xml:space="preserve" y="12.792247772216797" textLength="24.55">save</tspan></text></g><g transform="translate(796.5000000000001 228.66049999999996)"><path fill="url(#id12)" d="M0.0 6.0 L131.99999999999997 6.0 L131.99999999999997 96.0 Q131.99999999999997 98.48528137423857 112.66904755831209 100.24264068711929 Q93.33809511662425 102.0 65.99999999999997 102.0 Q38.6619048833757 102.0 19.330952441687835 100.24264068711929 Q0.0 98.48528137423857 0.0 96.0 L0.0 6.0z" stroke-width="1.0" stroke-linejoin="round" stroke="#286bcc"/><path fill="url(#id13)" d="M131.99999999999997 6.0 Q131.99999999999997 8.485281374238571 112.66904755831209 10.242640687119284 Q93.33809511662425 11.999999999999998 65.99999999999999 12.0 Q38.6619048833757 12.0 19.330952441687856 10.242640687119286 Q0.0 8.485281374238571 0.0 6.000000000000001 Q0.0 3.5147186257614313 19.330952441687835 1.7573593128807152 Q38.6619048833757 8.881784197001252E-16 65.99999999999997 0.0 Q93.33809511662425 -8.881784197001252E-16 112.66904755831209 1.7573593128807143 Q131.99999999999997 3.5147186257614287 131.99999999999997 6.0z" stroke-width="1.0" stroke-linejoin="round" stroke="#286bcc"/><g transform="translate(0.0 12.0)"><defs><clipPath id="id14"><path d="M0 0 L132.0 0 L132.0 90.0 L0 90.0z"/></clipPath></defs><text font-size="12" clip-path="url(#id14)" text-decoration="none" fill="#ffffff" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="46.0" xml:space="preserve" y="85.5" textLength="40.0">MySQL</tspan></text></g></g><g transform="translate(796.5000000000001 405.9815)"><path fill="url(#id15)" d="M29.0906629427109 43.358 L0.17786101515362698 21.678 L29.0906629427109 0.0 L86.91164703239801 0.0 L115.82213907724157 21.678 L86.91164703239801 43.358 L29.0906629427109 43.358 L29.0906629427109 43.358z" stroke-width="1.0" stroke-linejoin="round" stroke="#dc0800"/><g transform="translate(26.15942129223511 0.39899998903274536)"><defs><clipPath id="id16"><path d="M0 0 L63.602620169652965 0 L63.602620169652965 42.55400085449219 L0 42.55400085449219z"/></clipPath></defs><text font-size="12" clip-path="url(#id16)" text-decoration="none" fill="#ffffff" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="16.5" xml:space="preserve" y="25.527000427246094" textLength="30.5">Redis</tspan></text></g></g><g transform="translate(199.75 497.7365464135021)"><path fill="url(#id17)" d="M137.00000000000003 28.90295358649789 L0.0 28.90295358649789 L0.0 0.0 L137.00000000000003 0.0 L137.00000000000003 28.90295358649789z" stroke-width="1.0" stroke-linejoin="round" stroke="#8856a1"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id18"><path d="M0 0 L135.0 0 L135.0 26.902953586497915 L0 26.902953586497915z"/></clipPath></defs><text font-size="16" clip-path="url(#id18)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="35.0" xml:space="preserve" y="18.951476793248958" textLength="64.5">pyama.jp</tspan></text></g></g><g transform="translate(354.25 497.7365464135021)"><path fill="url(#id19)" d="M137.00000000000003 28.90295358649789 L0.0 28.90295358649789 L0.0 0.0 L137.00000000000003 0.0 L137.00000000000003 28.90295358649789z" stroke-width="1.0" stroke-linejoin="round" stroke="#8856a1"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id20"><path d="M0 0 L135.0 0 L135.0 26.902953586497915 L0 26.902953586497915z"/></clipPath></defs><text font-size="16" clip-path="url(#id20)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="24.5" xml:space="preserve" y="18.951476793248958" textLength="86.0">ikemen.com</tspan></text></g></g><g transform="translate(804.5000000000001 254.66049999999996)"><path fill="#ffffff" fill-opacity="1.0" d="M115.99999999999994 50.0 L0.0 50.0 L0.0 0.0 L115.99999999999994 0.0 L115.99999999999994 50.0z" stroke-width="1.0" stroke-linejoin="round" stroke="#000000"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id21"><path d="M0 0 L114.0 0 L114.0 48.0 L0 48.0z"/></clipPath></defs><text font-size="9" clip-path="url(#id21)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="13.0" xml:space="preserve" y="17.0" textLength="87.5">pyama.jp/ikemen.html</tspan></text><text font-size="9" clip-path="url(#id21)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="8.5" xml:space="preserve" y="27.0" textLength="96.5">pyama.jp/motemote.png</tspan><tspan x="53.0" xml:space="preserve" y="37.0" textLength="7.5">...</tspan></text></g></g><g transform="translate(190.0 339.0)"><path fill="url(#id22)" d="M466.00000000000006 8.999999999999993 Q466.00000000000006 23.999999999999993 451.00000000000006 23.999999999999993 L15.0 23.999999999999993 Q0.0 23.999999999999993 0.0 8.999999999999993 L0.0 15.0 Q0.0 0.0 15.0 0.0 L451.00000000000006 0.0 Q466.00000000000006 0.0 466.00000000000006 15.0 L466.00000000000006 8.999999999999993 L466.00000000000006 8.999999999999993z" stroke-width="1.0" stroke-linejoin="round" stroke="#51b11d"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id23"><path d="M0 0 L464.0 0 L464.0 22.0 L0 22.0z"/></clipPath></defs><text font-size="12" clip-path="url(#id23)" text-decoration="none" fill="#ffffff" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="203.1" xml:space="preserve" y="15.167247772216797" textLength="57.900000000000006">ngx_mruby</tspan></text></g></g><path fill="none" marker-end="url(#id24)" d="M656.0 351.0 L726.25 351.0 L726.25 279.66049999999996 L796.5000000000001 279.66049999999996" stroke-width="2.0" stroke-linejoin="round" stroke="#000000"/><path fill="none" stroke-linejoin="round" d="M656.0 351.0 L726.3389305075768 351.0 L726.3389305075768 427.6595 L796.6778610151538 427.6595" stroke="#000000" marker-start="url(#id25)" stroke-width="2.0" marker-end="url(#id26)"/><g transform="translate(745.0000000000001 340.3815)"><defs><clipPath id="id27"><path d="M0 0 L381.4 0 L381.4 65.59999999999997 L0 65.59999999999997z"/></clipPath></defs><text font-size="12" clip-path="url(#id27)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="1.95" xml:space="preserve" y="12.792247772216797" textLength="274.7">URLごとにキャッシュ利用可否をMySQLに定義し、</tspan><tspan x="1.95" xml:space="preserve" y="26.03727912902832" textLength="339.95">ngx_mrubyからクエリを実行して、キャシュの対象を取得する。</tspan><tspan x="1.95" xml:space="preserve" y="39.282310485839844" textLength="336.05">さらに同一URLの処理を高速化するためクエリの結果をRedisに</tspan></text><text font-size="12" clip-path="url(#id27)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="1.95" xml:space="preserve" y="52.52734184265137" textLength="94.2">キャッシュする。</tspan></text></g><path marker-start="url(#id28)" fill="none" d="M613.0 182.0 L610.1330341699781 527.2635216449836 Q610.05 537.2631769053721 600.0500069735971 537.2749867272505 L551.0499930264028 537.3328549112811 Q541.05 537.3446647331594 541.1051878976814 527.3448170195215 L543.0 184.01170839991846" stroke-width="3.0" stroke-linejoin="round" stroke="#cccccc"/><g transform="translate(509.25 497.7365464135021)"><path fill="url(#id29)" d="M137.00000000000003 28.90295358649789 L0.0 28.90295358649789 L0.0 0.0 L137.00000000000003 0.0 L137.00000000000003 28.90295358649789z" stroke-width="1.0" stroke-linejoin="round" stroke="#8856a1"/><g transform="translate(1.0 1.0)"><defs><clipPath id="id30"><path d="M0 0 L135.0 0 L135.0 26.902953586497915 L0 26.902953586497915z"/></clipPath></defs><text font-size="16" clip-path="url(#id30)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="19.15" xml:space="preserve" y="19.093178300817318" textLength="96.15">nocache.com</tspan></text></g></g><g transform="translate(511.70000000000005 163.55)"><defs><clipPath id="id31"><path d="M0 0 L164.0 0 L164.0 27.0 L0 27.0z"/></clipPath></defs><text font-size="12" clip-path="url(#id31)" text-decoration="none" fill="#000000" font-family="Arial,Arial" font-style="normal" font-weight="normal"><tspan x="1.95" xml:space="preserve" y="12.792247772216797" textLength="154.05">GET nocache.com/index.html</tspan></text></g></g></svg>